<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Heislab TTK4235: skeleton_project/source/functionality.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Heislab TTK4235
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_fe864c1c6398935b161362b97ce1c82c.html">skeleton_project</a></li><li class="navelem"><a class="el" href="dir_bb9480e4ada7c3da0061e65c131ef1d4.html">source</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">functionality.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Functionality keeps the final statemachine object and has does operations when the elevator is supposed to stop.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="elevator__cab_8h_source.html">driver/elevator_cab.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="door_8h_source.html">door.h</a>&quot;</code><br />
<code>#include &quot;time.h&quot;</code><br />
</div>
<p><a href="functionality_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_all_buttons.html">AllButtons</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><code>ALLButtons</code> Struct representing a collection of buttons  <a href="struct_all_buttons.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_state_machine.html">StateMachine</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><code><a class="el" href="struct_state_machine.html" title="StateMachine Struct representing a collection of states">StateMachine</a></code> Struct representing a collection of states  <a href="struct_state_machine.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af2dd361ce8ef2ea3c1046e8e429d342d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_state_machine.html">StateMachine</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="functionality_8h.html#af2dd361ce8ef2ea3c1046e8e429d342d">state_machine_constructor</a> (<a class="el" href="struct_elevator__cab.html">Elevator_cab</a> elevator_cab, <a class="el" href="struct_door.html">Door</a> door)</td></tr>
<tr class="separator:af2dd361ce8ef2ea3c1046e8e429d342d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c1077e84c6c1d268ec712f4bbe30441"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="functionality_8h.html#a8c1077e84c6c1d268ec712f4bbe30441">initialize_state_machine</a> (<a class="el" href="struct_state_machine.html">StateMachine</a> *statemachine)</td></tr>
<tr class="separator:a8c1077e84c6c1d268ec712f4bbe30441"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08281bafab5e837d6f0a6924c9e89397"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="functionality_8h.html#a08281bafab5e837d6f0a6924c9e89397">should_stop_this_floor</a> (<a class="el" href="struct_state_machine.html">StateMachine</a> *statemachine)</td></tr>
<tr class="memdesc:a08281bafab5e837d6f0a6924c9e89397"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether the elevator should stop at the current floor.  <a href="functionality_8h.html#a08281bafab5e837d6f0a6924c9e89397">More...</a><br /></td></tr>
<tr class="separator:a08281bafab5e837d6f0a6924c9e89397"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb2a8954815704a90cbd1771195911d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="functionality_8h.html#adb2a8954815704a90cbd1771195911d4">timer</a> (int seconds, <a class="el" href="struct_state_machine.html">StateMachine</a> *state_machine)</td></tr>
<tr class="memdesc:adb2a8954815704a90cbd1771195911d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer can count a given amount of seconds, and handles door-obstructions and emergencies.  <a href="functionality_8h.html#adb2a8954815704a90cbd1771195911d4">More...</a><br /></td></tr>
<tr class="separator:adb2a8954815704a90cbd1771195911d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Functionality keeps the final statemachine object and has does operations when the elevator is supposed to stop. </p>

<p class="definition">Definition in file <a class="el" href="functionality_8h_source.html">functionality.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a8c1077e84c6c1d268ec712f4bbe30441" name="a8c1077e84c6c1d268ec712f4bbe30441"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c1077e84c6c1d268ec712f4bbe30441">&#9670;&nbsp;</a></span>initialize_state_machine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initialize_state_machine </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_state_machine.html">StateMachine</a> *&#160;</td>
          <td class="paramname"><em>statemachine</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="functionality_8c_source.html#l00018">18</a> of file <a class="el" href="functionality_8c_source.html">functionality.c</a>.</p>

</div>
</div>
<a id="a08281bafab5e837d6f0a6924c9e89397" name="a08281bafab5e837d6f0a6924c9e89397"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08281bafab5e837d6f0a6924c9e89397">&#9670;&nbsp;</a></span>should_stop_this_floor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool should_stop_this_floor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_state_machine.html">StateMachine</a> *&#160;</td>
          <td class="paramname"><em>statemachine</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines whether the elevator should stop at the current floor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">statemachine</td><td>is a pointer to the statemachine object, and holds elevator_cab object with the cab's last direction, current floor, and also keeps the button-array </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the elevator should stop at the current floor, and false otherwise</dd></dl>
<p>The four if-statements are executed sequentially:</p><ul>
<li>if someone wants to join the elevator in the current direction at the current floor, the elvator stops</li>
<li>if someone wants to get off at the current floor, the elevator stops</li>
<li>if none of the above if-statements have hits, the elevator scans the button array, looking for orders on the floors above if direction is UP, and below if direction is DOWN, to check if it should go past the current floor</li>
<li>if there are no orders above/below, the elevator may stop to pick up passangers going the opposite direction </li>
</ul>

<p class="definition">Definition at line <a class="el" href="functionality_8c_source.html#l00022">22</a> of file <a class="el" href="functionality_8c_source.html">functionality.c</a>.</p>

</div>
</div>
<a id="af2dd361ce8ef2ea3c1046e8e429d342d" name="af2dd361ce8ef2ea3c1046e8e429d342d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2dd361ce8ef2ea3c1046e8e429d342d">&#9670;&nbsp;</a></span>state_machine_constructor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_state_machine.html">StateMachine</a> state_machine_constructor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_elevator__cab.html">Elevator_cab</a>&#160;</td>
          <td class="paramname"><em>elevator_cab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_door.html">Door</a>&#160;</td>
          <td class="paramname"><em>door</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="functionality_8c_source.html#l00004">4</a> of file <a class="el" href="functionality_8c_source.html">functionality.c</a>.</p>

</div>
</div>
<a id="adb2a8954815704a90cbd1771195911d4" name="adb2a8954815704a90cbd1771195911d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb2a8954815704a90cbd1771195911d4">&#9670;&nbsp;</a></span>timer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timer </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>seconds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_state_machine.html">StateMachine</a> *&#160;</td>
          <td class="paramname"><em>state_machine</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Timer can count a given amount of seconds, and handles door-obstructions and emergencies. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>
<p>p seconds Amount of seconds the timer should count <br  />
 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>
<p>p state_machine Pointer to a <code><a class="el" href="struct_state_machine.html" title="StateMachine Struct representing a collection of states">StateMachine</a></code> object</p>
<ul>
<li>if three seconds has elapsed, it breaks the loop</li>
<li>if the stopbutton is pressed, it constantly clears the Orderlist, and restarts the count. This is to ensure emergency functionality when timer is called in main</li>
<li>if obstruction-sensor is activated, it restarts the count</li>
<li>it also polls the Orderlist as so that orders can be registered when the timer is activated in main </li>
</ul>

<p class="definition">Definition at line <a class="el" href="functionality_8c_source.html#l00053">53</a> of file <a class="el" href="functionality_8c_source.html">functionality.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
